<html>
    <head>
        <title>analyse result</title>
        <script type="text/javascript">
        <![CDATA[
            currentState = "none";

            function changeState(newState) {
                currentState = newState;
                var options = document.getElementsByClassName("state_option");
                for(var i = 0 ; i < options.length; i++) {
                    options[i].style.color = "black";
                    if(options[i].innerHTML == newState) {
                        options[i].style.color = "red";
                    }
                }

                document.getElementById("feedback_list").innerHTML += "<li>change state to " + newState + "</li>";
            }

            function addNewWord(word, port) {
                if(currentState == 'none') {
                    return;
                }

                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open("GET", "http://localhost:" + port + "/addnewword?word=" + word + "&state=" + currentState, true);
                xmlhttp.send();

                window.event.srcElement.style.color = "black";

                var ems = document.getElementsByTagName("em");
                for(var i = 0; i < ems.length; i++) {
                    if(ems[i].innerHTML.toLowerCase() == word.toLowerCase()) {
                        ems[i].style.color = "black";
                    }
                }

                document.getElementById("feedback_list").innerHTML += "<li>add "+ currentState + " word " + word + "</li>";
            }
        ]]>
        </script>
        <style type="text/css">
        <![CDATA[
            body{
                margin:0px;
            }

            #control_bar{
                position:fixed;
                clear:left;
                background-color:white;
                width:100%;
            }

            #feedback{
                float:left;
                width:15%;
            }

            #article{
                margin-top:50px;
                float:left;
                width:80%;
            }

            #main{
            }
        ]]>
        </style>
    </head>
    <body>
        <div id="control_bar">
            <span class="state_option" onclick="changeState('familiar')">familiar</span>
            <span class="state_option" onclick="changeState('unfamiliar')">unfamiliar</span>
            <span class="state_option" onclick="changeState('unrecognized')">unrecognized</span>
            <span class="state_option" onclick="changeState('ignored')">ignored</span>
            <span class="state_option" onclick="changeState('none')" style="color:red">none</span>
            <hr/>
        </div>

        <div id="main">
            <div id="article">

            </div>

            <div id="feedback">
                <ul id="feedback_list">
                    <li>(feedback)</li>
                </ul>
            </div>
        </div>
    </body>
</html>